(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[29],{1055:function(e,n,t){"use strict";t.r(n);var a=t(16),o=t(3),i=t(10),c=t(30),l=(t(822),t(0)),r=t.n(l),d=t(48),u=t(1050),s=t(43),h=t(13),v=t(707),m=Object(d.o)((function(e){var n,t=e.shiftData,a=e.isInput,o=e.setIsInput,i=Object(v.b)((function(e){return e.thucDonDuTru})).tongHopOfShifts,c=t.id,l=(null===i||void 0===i||null===(n=i[c])||void 0===n?void 0:n.tongPhanAn)||0,d=t.id===a.shiftId;return r.a.createElement("div",{className:"display-4 mt-1 kind-title"},"".concat(t.name," - ").concat(Object(h.b)(l)," ph\u1ea7n"),r.a.createElement("button",{className:["btn btn-sm ml-1 mb-1",d?"btn-warning":"btn-outline-warning"].join(" "),onClick:function(){o(d?{}:{shiftId:t.id,type:"soPhanAn"})}},d?"\u0110\xf3ng":"M\u1edf"," c\u1eadp nh\u1eadt ",null===t||void 0===t?void 0:t.name))})),f=t(865),b=function(e){var n=e.rowDatas.reduce((function(e,n){var t=((null===e||void 0===e?void 0:e.thanhTien)||0)+((null===n||void 0===n?void 0:n.thanhTien)||0);return Object(o.a)(Object(o.a)({},e),{},{soPhanAn:((null===e||void 0===e?void 0:e.soPhanAn)||0)+((null===n||void 0===n?void 0:n.soPhanAn)||0),soPhanThem:((null===e||void 0===e?void 0:e.soPhanThem)||0)+((null===n||void 0===n?void 0:n.soPhanThem)||0),thanhTien:Math.round(t)})}),{});return r.a.createElement(u.a.Summary.Row,null,r.a.createElement(u.a.Summary.Cell,{colSpan:6},r.a.createElement("div",{className:"text-center text-small font-weight-bold text-dark"},"T\u1ed5ng")),r.a.createElement(u.a.Summary.Cell,{colSpan:1},r.a.createElement("div",{className:"font-weight-bold  text-small text-danger float-right"},Object(h.a)(n.thanhTien))),r.a.createElement(u.a.Summary.Cell,{colSpan:1}))},g={soMonMan:"S\u1ed1 m\xf3n m\u1eb7n",soMonChay:"S\u1ed1 m\xf3n chay",soMonCT:"S\u1ed1 m\xf3n CT",soMonNuoc:"S\u1ed1 m\xf3n n\u01b0\u1edbc",tongPhan:"T\u1ed5ng ph\u1ea7n"},C=function(e){var n,t=e.dayTongHopData,a=e.shiftId,o=Object(v.b)((function(e){return e.thucDonDuTru})).tongHopOfShifts,d=Object(v.b)((function(e){return e.thucDonDuTruSetting})).nhomGiaMonAnData,s=(null===o||void 0===o||null===(n=o[a])||void 0===n?void 0:n.tongPhanAn)||0,m=(null===t||void 0===t?void 0:t.tongPhan)||0,f=(null===d||void 0===d?void 0:d.giaPhanAn)||0,b=s*f,C=Object(l.useState)([]),p=Object(c.a)(C,2),I=p[0],D=p[1];Object(l.useEffect)((function(){var e=[];t&&(e=(e=["soMonMan","soMonChay","soMonCT","soMonNuoc","tongPhan"].reduce((function(e,n){var a=(null===t||void 0===t?void 0:t[n])||0,o=a*f,c={loaiMon:n,soPhan:a,cost:Math.round(o/b*100*10)/10};return[].concat(Object(i.a)(e),[c])}),[])).filter((function(e){return e.soPhan>0}))),D(e)}),[t,o]);var O=[{dataIndex:"loaiMon",title:"Lo\u1ea1i m\xf3n",width:110,className:" text-small",render:function(e,n){return"tongPhan"===n.loaiMon?r.a.createElement("div",{className:"font-weight-bold"},(null===g||void 0===g?void 0:g[e])||""):(null===g||void 0===g?void 0:g[e])||""}},{dataIndex:"soPhan",title:"S\u1ed1 ph\u1ea7n",className:" text-small",render:function(e,n){return"tongPhan"===n.loaiMon?r.a.createElement("div",{className:"float-right font-weight-bold"},Object(h.a)(e)):r.a.createElement("div",{className:"float-right"},Object(h.a)(e))},width:70},{dataIndex:"cost",title:"Cost",width:60,className:" text-small",render:function(e,n){return"tongPhan"===n.loaiMon?r.a.createElement("small",{className:"float-right font-weight-bold"},s-m):r.a.createElement("small",{className:"float-right text-danger font-weight-bold"},e,"%")}}];return r.a.createElement("div",null,r.a.createElement("div",{className:"font-weight-bold text-center text-danger mb-2"},"T\u1ed5ng h\u1ee3p s\u1ed1 ph\u1ea7n"),r.a.createElement(u.a,{rowKey:"loaiMon",columns:O,dataSource:I,pagination:!1,scroll:{x:240}}))},p=t(776),I=t(291),D=t(297),O={chiPhiCoDinh:"CP c\u1ed1 \u0111\u1ecbnh",chiPhiNguyenVatLieu:"CP NVL",tongChiPhi:"T\u1ed5ng CP",doanhThu:"Doanh Thu"},y=Object(d.o)((function(e){var n=e.history,t=e.dayTongHopData,a=e.dataSource,i=e.shiftData,l=i.id,d=Object(v.b)((function(e){return e.thucDonDuTru})).tongHopOfShifts,s=Object(v.b)((function(e){return e.thucDonDuTruSetting})).nhomGiaMonAnData,m=r.a.useState([]),f=Object(c.a)(m,2),b=f[0],g=f[1],C=r.a.useState(0),y=Object(c.a)(C,2),M=y[0],T=y[1],j=r.a.useState(0),N=Object(c.a)(j,2),P=N[0],E=N[1];r.a.useEffect((function(){var e,n=P+M,t=((null===s||void 0===s?void 0:s.giaPhanAn)||0)*((null===d||void 0===d||null===(e=d[l])||void 0===e?void 0:e.tongPhanAn)||0),a=[{loaiChiPhi:"chiPhiCoDinh",tien:M||"",cost:n&&M?Math.round(M/n*100*100)/100:""},{loaiChiPhi:"chiPhiNguyenVatLieu",tien:P||"",cost:P&&n?Math.round(P/n*100*100)/100:""},{loaiChiPhi:"tongChiPhi",tien:n||"",cost:n&&t?Math.round(n/t*100*100)/100:""},{loaiChiPhi:"doanhThu",tien:t||"",cost:""}];g(a)}),[M,P,s,t,d,l]),r.a.useEffect((function(){if(s&&t){var e=(null===t||void 0===t?void 0:t.tongPhan)||0,n=Object(I.b)(s,{tongPhan:e});T(n)}}),[s,t]),r.a.useEffect((function(){var e=a.reduce((function(e,n){var t=((null===e||void 0===e?void 0:e.thanhTien)||0)+((null===n||void 0===n?void 0:n.thanhTien)||0);return Object(o.a)(Object(o.a)({},e),{},{thanhTien:Math.round(t)})}),{});E((null===e||void 0===e?void 0:e.thanhTien)||0)}),[a,d]);var S=[{dataIndex:"loaiChiPhi",title:"Lo\u1ea1i CP",width:120,className:" text-small",render:function(e){switch(e){case"chiPhiCoDinh":return r.a.createElement("div",{style:{textDecoration:"underline",color:"blue"},className:"hoverClass",onClick:function(){var e=[[p.b.MODAL_ID,p.a.openChiPhiCoDinhModal.id],[p.b.SHIFT_ID,i.id]];Object(D.d)(n,e)}},(null===O||void 0===O?void 0:O[e])||"");case"tongChiPhi":case"doanhThu":return r.a.createElement("div",{className:"font-weight-bold"},null===O||void 0===O?void 0:O[e]);default:return r.a.createElement("div",null,(null===O||void 0===O?void 0:O[e])||"")}}},{dataIndex:"tien",title:"Ti\u1ec1n",className:" text-small",render:function(e,n){return"tongChiPhi"===n.loaiChiPhi||"doanhThu"===n.loaiChiPhi?r.a.createElement("div",{className:"float-right font-weight-bold"},Object(h.a)(e)):r.a.createElement("div",{className:"float-right"},Object(h.a)(e))},width:70},{dataIndex:"cost",title:"Cost",width:60,className:" text-small",render:function(e){return e&&r.a.createElement("sub",{className:"text-danger font-weight-bold"},e,"%")}}];return r.a.createElement("div",{className:"mt-2"},r.a.createElement("div",{className:"font-weight-bold text-center text-danger mb-2"},"T\u1ed5ng h\u1ee3p chi ph\xed"),r.a.createElement(u.a,{rowKey:"loaiChiPhi",columns:S,dataSource:b,pagination:!1,scroll:{x:250}}))})),M=t(149),T=t(712),j=t(5),N=t(8),P=t(18),E=t(7),S=t.n(E),x=t(110),w=t(179),A=t(74),_=t(96),k=t(6);function L(e){return void 0!==e&&null!==e}var R=function(e){var n,t=e.itemPrefixCls,a=e.component,o=e.span,i=e.className,c=e.style,r=e.labelStyle,d=e.contentStyle,u=e.bordered,s=e.label,h=e.content,v=e.colon,m=a;return u?l.createElement(m,{className:S()((n={},Object(j.a)(n,"".concat(t,"-item-label"),L(s)),Object(j.a)(n,"".concat(t,"-item-content"),L(h)),n),i),style:c,colSpan:o},L(s)&&l.createElement("span",{style:r},s),L(h)&&l.createElement("span",{style:d},h)):l.createElement(m,{className:S()("".concat(t,"-item"),i),style:c,colSpan:o},l.createElement("div",{className:"".concat(t,"-item-container")},s&&l.createElement("span",{className:S()("".concat(t,"-item-label"),Object(j.a)({},"".concat(t,"-item-no-colon"),!v)),style:r},s),h&&l.createElement("span",{className:S()("".concat(t,"-item-content")),style:d},h)))};function V(e,n,t){var a=n.colon,o=n.prefixCls,i=n.bordered,c=t.component,r=t.type,d=t.showLabel,u=t.showContent,s=t.labelStyle,h=t.contentStyle;return e.map((function(e,n){var t=e.props,v=t.label,m=t.children,f=t.prefixCls,b=void 0===f?o:f,g=t.className,C=t.style,p=t.labelStyle,I=t.contentStyle,D=t.span,O=void 0===D?1:D,y=e.key;return"string"===typeof c?l.createElement(R,{key:"".concat(r,"-").concat(y||n),className:g,style:C,labelStyle:Object(k.a)(Object(k.a)({},s),p),contentStyle:Object(k.a)(Object(k.a)({},h),I),span:O,colon:a,component:c,itemPrefixCls:b,bordered:i,label:d?v:null,content:u?m:null}):[l.createElement(R,{key:"label-".concat(y||n),className:g,style:Object(k.a)(Object(k.a)(Object(k.a)({},s),C),p),span:1,colon:a,component:c[0],itemPrefixCls:b,bordered:i,label:v}),l.createElement(R,{key:"content-".concat(y||n),className:g,style:Object(k.a)(Object(k.a)(Object(k.a)({},h),C),I),span:2*O-1,component:c[1],itemPrefixCls:b,bordered:i,content:m})]}))}var H=function(e){var n=l.useContext(G),t=e.prefixCls,a=e.vertical,o=e.row,i=e.index,c=e.bordered;return a?l.createElement(l.Fragment,null,l.createElement("tr",{key:"label-".concat(i),className:"".concat(t,"-row")},V(o,e,Object(k.a)({component:"th",type:"label",showLabel:!0},n))),l.createElement("tr",{key:"content-".concat(i),className:"".concat(t,"-row")},V(o,e,Object(k.a)({component:"td",type:"content",showContent:!0},n)))):l.createElement("tr",{key:i,className:"".concat(t,"-row")},V(o,e,Object(k.a)({component:c?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},n)))},K=function(e){return e.children},U=t(31),G=l.createContext({}),Y={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function F(e,n,t){var a=e;return(void 0===n||n>t)&&(a=Object(U.a)(e,{span:t}),Object(A.a)(void 0===n,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),a}function B(e){var n,t=e.prefixCls,a=e.title,o=e.extra,i=e.column,c=void 0===i?Y:i,r=e.colon,d=void 0===r||r,u=e.bordered,s=e.layout,h=e.children,v=e.className,m=e.style,f=e.size,b=e.labelStyle,g=e.contentStyle,C=l.useContext(_.b),p=C.getPrefixCls,I=C.direction,D=p("descriptions",t),O=l.useState({}),y=Object(N.a)(O,2),M=y[0],T=y[1],E=function(e,n){if("number"===typeof e)return e;if("object"===Object(P.a)(e))for(var t=0;t<w.b.length;t++){var a=w.b[t];if(n[a]&&void 0!==e[a])return e[a]||Y[a]}return 3}(c,M);l.useEffect((function(){var e=w.a.subscribe((function(e){"object"===Object(P.a)(c)&&T(e)}));return function(){w.a.unsubscribe(e)}}),[]);var A=function(e,n){var t=Object(x.a)(e).filter((function(e){return e})),a=[],o=[],i=n;return t.forEach((function(e,c){var l,r=null===(l=e.props)||void 0===l?void 0:l.span,d=r||1;if(c===t.length-1)return o.push(F(e,r,i)),void a.push(o);d<i?(i-=d,o.push(e)):(o.push(F(e,d,i)),a.push(o),i=n,o=[])})),a}(h,E),k=l.useMemo((function(){return{labelStyle:b,contentStyle:g}}),[b,g]);return l.createElement(G.Provider,{value:k},l.createElement("div",{className:S()(D,(n={},Object(j.a)(n,"".concat(D,"-").concat(f),f&&"default"!==f),Object(j.a)(n,"".concat(D,"-bordered"),!!u),Object(j.a)(n,"".concat(D,"-rtl"),"rtl"===I),n),v),style:m},(a||o)&&l.createElement("div",{className:"".concat(D,"-header")},a&&l.createElement("div",{className:"".concat(D,"-title")},a),o&&l.createElement("div",{className:"".concat(D,"-extra")},o)),l.createElement("div",{className:"".concat(D,"-view")},l.createElement("table",null,l.createElement("tbody",null,A.map((function(e,n){return l.createElement(H,{key:n,index:n,colon:d,prefixCls:D,vertical:"vertical"===s,bordered:u,row:e})})))))))}B.Item=K;var X=B,z=t(702),W=t(703),J=t(239),q=X.Item,Q=function(e){var n,t=e.history,a=e.location,o=e.dayTongHopData,i=e.shiftData,d=Object(D.c)(a,p.b.MODAL_ID),u=Object(D.c)(a,p.b.SHIFT_ID),s=Object(v.b)((function(e){return e.thucDonDuTruSetting})).nhomGiaMonAnData,m=Object(v.b)((function(e){return e.diaDiem})).diaDiemData,f=null===m||void 0===m?void 0:m.id,b=Object(l.useState)(!1),g=Object(c.a)(b,2),C=g[0],I=g[1];Object(l.useEffect)((function(){var e=d===p.a.openChiPhiCoDinhModal.id&&"".concat(i.id)==="".concat(u);I(!!e)}),[d,i]);var O=(null===o||void 0===o?void 0:o.tongPhan)||0,y=(null===o||void 0===o?void 0:o.chiPhiCoDinh)||0,j=((null===o||void 0===o?void 0:o.soMonMan)||0)+((null===o||void 0===o?void 0:o.soMonChay)||0);return r.a.createElement(T.a,{title:r.a.createElement("div",{className:"text-dark"},r.a.createElement("i",{className:"fa fa-sliders mr-2"}),r.a.createElement("strong",null,p.a.openChiPhiCoDinhModal.name," - ",null===M.c||void 0===M.c||null===(n=M.c[f])||void 0===n?void 0:n.name)),isOpen:C,onCancel:function(){return t.push("?")},centered:!0,footer:!1,width:"650px"},r.a.createElement("div",{className:"mb-3"},r.a.createElement("strong",null,"T\u1ed5ng ph\u1ea7n: ",Object(h.a)(O),", T\u1ed5ng ph\u1ea7n c\u01a1m: ",Object(h.a)(j)," - Chi ph\xed c\u1ed1 \u0111\u1ecbnh: ",Object(h.a)(y))),r.a.createElement(X,{bordered:!0,column:1,size:"small"},J.b.map((function(e){var n=(null===s||void 0===s?void 0:s[e.id])||0,t="".concat(e.name," = ").concat(Object(h.a)(n)," x ").concat(Object(h.a)(O)," ph\u1ea7n"),a=O*n;if("gao"===e.id){var o=n,i=(null===s||void 0===s?void 0:s.dinhLuongGao)||0,c=Math.round(i/100)/10;a=(n*=c)*j,t="Gi\xe1 ".concat(e.name," x \u0110L g\u1ea1o = ").concat(Object(h.a)(o)," x ").concat(c," x ").concat(Object(h.a)(j)," ph\u1ea7n")}var l=Object(h.k)(a,y);return r.a.createElement(q,{key:e.id,label:t,span:1},r.a.createElement(z.a,{gutter:5},r.a.createElement(W.a,{span:12,className:"font-weight-bold"},r.a.createElement("div",{className:"float-right"},Object(h.a)(a))),r.a.createElement(W.a,{span:12},r.a.createElement("small",{className:"text-danger font-weight-bold"},"(",l,"%)"))))}))))};Q.defaultProps={};var Z=Object(d.o)(Q),$=t(805),ee=t(95),ne=t(292),te=t(296),ae=t(294),oe=t(337);var ie=function(e){var n=e.record,t=Object(v.b)((function(e){return e.nguyenLieu})).nguyenLieus,a=Object(v.b)((function(e){return e.recipe})).ingreRecipeData,o=r.a.useMemo((function(){var e=null===n||void 0===n?void 0:n.tenMon;return((null===a||void 0===a?void 0:a[e])||[]).reduce((function(a,o){var c,l=o.id,r=(null===t||void 0===t?void 0:t[l])||{},d=r.tenNguyenLieu,u=r.tenNhaCungCap,s=r.giaNguyenLieu,h=void 0===s?0:s,v=o.dinhLuong||0,m=(n.soPhanAn||0)+(n.soPhanThem||0),f=(null===n||void 0===n?void 0:n.dieuChinh)||{},b=(null===f||void 0===f||null===(c=f[e])||void 0===c?void 0:c[l])||0,g=(v+b)*m/1e3,C=Math.round(g*h),p={id:o.id,tenNguyenLieu:d,dinhLuong:v,dieuChinh:b,tongDinhLuong:g,tongGia:C,tenNhaCungCap:u,giaNguyenLieu:h};return[].concat(Object(i.a)(a),[p])}),[])}),[n,a,t]),c=r.a.useMemo((function(){return(new oe.a).getChiTietThanhPhanColumns()}),[]);return r.a.createElement("div",{style:{width:"100%"},className:"ingreExpandexItem"},r.a.createElement(u.a,{bordered:!0,size:"small",className:"mb-2",rowKey:"id",columns:c,dataSource:o,pagination:!1}))};n.default=Object(d.o)((function(e){var n=e.shiftData,t=e.soMonMan,d=e.isInput,h=e.setIsInput,g=Object(v.a)(),p=Object(v.b)((function(e){return e.diaDiem})),D=p.diaDiemData,O=p.customerId,M=p.yearId,T=p.weekId,j=p.dayId,N=Object(v.b)((function(e){return e.nguyenLieu})).nguyenLieus,P=Object(v.b)((function(e){return e.recipe})),E=P.recipes,S=P.ingreRecipeData,x=Object(v.b)((function(e){return e.thucDonDuTruSetting})),w=x.cauHinhDuTrus,A=x.recipeKinds,_=x.nhomGiaMonAnData,k=Object(v.b)((function(e){return e.thucDonDuTru})),L=null===D||void 0===D?void 0:D.id,R=n.id,V=null===k||void 0===k?void 0:k.isLoading,H=(null===_||void 0===_?void 0:_.giaPhanAn)||0,K=null===k||void 0===k?void 0:k["duTruDatas/".concat(R)],U=null===k||void 0===k?void 0:k["thucDonDatas/".concat(R)],G=null===k||void 0===k?void 0:k["tongHopDuTruData/".concat(O,"/").concat(R)],Y=r.a.useMemo((function(){return new f.a}),[]),F=r.a.useMemo((function(){return null===w||void 0===w?void 0:w[R]}),[w,R]),B=Object(l.useState)(!1),X=Object(c.a)(B,2),z=X[0],W=X[1],J=Object(l.useState)([]),q=Object(c.a)(J,2),Q=q[0],oe=q[1];r.a.useEffect((function(){g(Object(ne.d)(L,O))}),[L,O]),r.a.useEffect((function(){var e=[];F&&K&&U&&j&&N&&S&&(e=(e=ee.a.reduce((function(e,n){var t=n.id,a=null===F||void 0===F?void 0:F[n.id],o=((null===a||void 0===a?void 0:a.values)||[]).map((function(e){var n,a=null===K||void 0===K?void 0:K[e],o=null===U||void 0===U?void 0:U[e],i=null===o||void 0===o?void 0:o.recipeId,c=(null===a||void 0===a?void 0:a.soPhanAn)||0,l=(null===a||void 0===a?void 0:a.soPhanThem)||0,r=c+l,d=(null===a||void 0===a?void 0:a.ghiChu)||"",u=(null===a||void 0===a?void 0:a.dieuChinh)||{},s=(null===S||void 0===S?void 0:S[i])||[],h=g(Object(ae.d)({nguyenLieus:s},u,[i])),v=r*h;return{id:"".concat(e),name:(null===A||void 0===A||null===(n=A[e])||void 0===n?void 0:n.name)||e,loaiMonId:t,recipeId:i,tenMon:i,giaMon:h,thanhTien:v,ghiChu:d,soPhanThem:l,soPhanAn:c,tongPhan:r,dieuChinh:u,chiPhiNVL:v}}));return[].concat(Object(i.a)(e),Object(i.a)(o))}),[])).filter((function(e){return e.tenMon}))),oe(e)}),[F,K,U,j,N,S]),r.a.useEffect((function(){var e=[L,M,T,"shiftIds",R,"customerIds",O,j,"kindIds"];return L&&M&&T&&R&&O&&j&&g(Object(te.c)(e,{shiftId:R})),function(){return Object(te.k)(R)}}),[L,M,T,R,O,j]),r.a.useEffect((function(){var e=[L,M,T,"shiftIds",R,"thucDons",j,"kindIds"];return L&&M&&T&&R&&j&&g(Object(te.d)(e,{shiftId:R})),function(){return Object(te.j)(R)}}),[L,M,T,R,j]),r.a.useEffect((function(){if(K&&F&&O&&_&&Q.length>0){var e=ce(K,Q);g(Object(te.o)(O,R,e))}else g(Object(te.o)(O,R,null))}),[O,K,F,_,Q]),r.a.useEffect((function(){h({})}),[j,L,O,M,T]);var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={dayDuTruData:e,dayId:j,dayThucDonData:U,recipeDatas:E,soMonMan:t},o=$.a.getSoTongPhan(F,a),i=Object(I.b)(_,{tongPhan:o}),c=n.reduce((function(e,n){return e+(n.chiPhiNVL||0)}),0),l=i+c,r={soMonMan:$.a.getSoMonMan(F,a),soMonMan_CoCanh:$.a.getSoMonMan_CoCanh(F,a),soMonNuocChay:$.a.getSoMonNuocChay(F,a),soMonCT_CoCom:$.a.getSoMonCT_CoCom(F,a),soMonChay:$.a.getSoMonChay(F,a),soMonCT:$.a.getSoMonCT(F,a),soMonNuoc:$.a.getSoMonNuoc(F,a),soMonCanh:$.a.getSoMonCanh(F,a),soMonXao:$.a.getSoMonXao(F,a),soMonTrangMieng:$.a.getSoMonTrangMieng(F,a),tongPhan:o,chiPhiCoDinh:i,chiPhiNVL:c,tongChiPhi:l};return r},le=Y.getDuTruItemColumns(Object(o.a)(Object(o.a)({},e),{},{dayId:j,giaPhanAn:H,customerId:O,nhomGiaMonAnDataId:null===_||void 0===_?void 0:_.id,coSoId:L,shiftId:R,isInput:d,setIsInput:h,onUpdate:function(e,n){var t,c,l,r=null===n||void 0===n?void 0:n.recipeKindId,d=null===n||void 0===n?void 0:n.type,u=[L,M,T,"shiftIds",R,"customerIds",O,j,"kindIds",r,d],h=null===K||void 0===K||null===(t=K[r])||void 0===t?void 0:t[d];switch(d){case"ghiChu":h=h||"";break;case"soPhanAn":case"soPhanThem":h=h||0;break;case"dieuChinh":var v=null===n||void 0===n?void 0:n.nguyenLieuId,m=null===n||void 0===n?void 0:n.recipeId;u=[].concat(Object(i.a)(u),[m,v]),h=(null===(c=h)||void 0===c||null===(l=c[m])||void 0===l?void 0:l[v])||0}var f=!Object(s.isEqual)(h,e),b=function(){W(!1)};if(r&&d&&f)switch(W(!0),d){case"soPhanAn":case"soPhanThem":var C=Object(o.a)({},K),p=(null===C||void 0===C?void 0:C.ghiChu)||null;p||(p=""),Object(s.set)(C,[r,d],e);var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null===e||void 0===e?void 0:e.soMonCanh)||0,t=(null===e||void 0===e?void 0:e.soMonMan_CoCanh)||0,i=(null===e||void 0===e?void 0:e.soMonNuocChay)||0,c=(null===e||void 0===e?void 0:e.soMonCT_CoCom)||0,l=(null===e||void 0===e?void 0:e.soMonXao)||0,r=(null===e||void 0===e?void 0:e.soMonTrangMieng)||0,d=n-t-i+c,u=l-i,s=[{id:ee.b.monCanhConfig.id,soPhanAn:d===1/0?0:d},{id:ee.b.monXaoConfig.id,soPhanAn:u===1/0?0:u},{id:ee.b.dessertConfig.id,soPhanAn:r===1/0?0:r}],h=s.reduce((function(e,n){var t,i,c=null===(t=F[n.id])||void 0===t||null===(i=t.values)||void 0===i?void 0:i[0],l=(null===K||void 0===K?void 0:K[c])||{},r=(null===l||void 0===l?void 0:l.ghiChu)||null;r||(r="");var d=Object(o.a)(Object(o.a)({},l),{},{ghiChu:r,soPhanAn:n.soPhanAn});return Object(o.a)(Object(o.a)({},e),{},Object(a.a)({},c,d))}),{});return h}(ce(C,[])),D=null===C||void 0===C?void 0:C[r],y=Object(o.a)(Object(o.a)({},I),{},Object(a.a)({},r,Object(o.a)({ghiChu:p},D))),N=[L,M,T,"shiftIds",R,"customerIds",O,j,"kindIds"];g(Object(te.m)(N,y,b,{}));break;case"ghiChu":case"dieuChinh":g(Object(te.h)(u,e,b,{}))}}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row duTruItem mb-3"},r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(m,{shiftData:n,isInput:d,setIsInput:h}),r.a.createElement("div",{className:"mb-2"},r.a.createElement(u.a,{size:"small",loading:V||z,rowKey:"id",bordered:!0,columns:le,dataSource:Q,pagination:!1,expandAll:!0,scroll:{x:800},expandable:{expandedRowRender:function(e){return r.a.createElement(ie,{record:e})}},summary:function(e){return r.a.createElement(b,{rowDatas:e})}}))),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement(C,{shiftId:R,dayTongHopData:G}),r.a.createElement(y,{shiftData:n,dayTongHopData:G,dataSource:Q}))),r.a.createElement(Z,{shiftData:n,dayTongHopData:G}))}))},776:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return o}));var a={ID:"id",MODAL_ID:"modalId",CUSTOMER_GROUP_ID:"customerGroupId",COSO_ID:"coSoId",NHANVIEN_ID:"nhanvienId",VIEW_STATUS:"pagestatus",ADD_NHANVIEN:"addNhanVien",BAO_CAO_KIND:"baoCaoKind",REPORT_ID:"reportId",OPEN_MODAL:"openModal",CANTIN_ID:"cantinId",CUSTOMER_ID:"customerId",VIEW_KIND_ID:"viewKindId",RECIPE_ID:"recipeId",IS_MON_PHU:"isMonPhu",INGRE_ID:"ingreID",VENDOR_ID:"nhaCungCapId",KIND_ID:"kindId",DAY:"day",DAY_ID:"dayId",SHIFT:"shift",SHIFT_ID:"shiftId",BOPHAN_ID:"boPhanId",WEEK_ID:"weekId",MONTH_ID:"monthId",YEAR_ID:"yearId",KETOAN_DRAWER_ID:"keToanDrawerId",KHUVUC_ID:"khuVucId",LOAITAISAN_ID:"loaiTaiSanId",TAISAN_ID:"taiSanId"},o={editNhanvien:{id:"editNhanvien",name:"C\u1eadp nh\u1eadt Nh\xe2n Vi\xean"},addNhanvien:{id:"addNhanvien",name:"Th\xeam Nh\xe2n Vi\xean"},viewNhanvien:{id:"viewNhanvien",name:"Xem Nh\xe2n Vi\xean"},themBaoCao:{id:"themBaoCao",name:"Th\xeam b\xe1o c\xe1o"},addRecipe:{id:"addRecipe",name:"Th\xeam m\xf3n",getTitle:function(){return"Th\xeam M\xf3n M\u1edbi"}},editRecipe:{id:"editRecipe",name:"C\u1eadp nh\u1eadt m\xf3n",getTitle:function(e){return"Update ".concat(String(e).toUpperCase())}},addIngre:{id:"addIngre",name:"Th\xeam Nguy\xean Li\u1ec7u",getTitle:function(e){return"Update ".concat(String(e).toUpperCase())}},editIngre:{id:"editIngre",name:"Update Nguy\xean Li\u1ec7u",getTitle:function(e){return"Update ".concat(String(e).toUpperCase())}},vendorModal:{id:"vendorModal",name:"Nh\xe0 Cung C\u1ea5p"},selectRecipe:{id:"selectRecipe",name:"Ch\u1ecdn",getTitle:function(e){return"Ch\u1ecdn ".concat(e)}},configCantin:{id:"configCantin",name:"Th\xf4ng tin c\u0103n tin"},addChiPhiPhatSinh:{id:"addChiPhiPhatSinh",name:"Chi Ph\xed Ph\xe1t Sinh"},openDutrus:{id:"openDutrus",name:"M\u1edf D\u1ef1 Tr\xf9"},addSoPhanAn:{id:"addSoPhanAn",name:"Th\xeam S\u1ed1 Ph\u1ea7n \u0102n"},addExtraSoPhanAn:{id:"addExtraSoPhanAn",name:"Th\xeam S\u1ed1 Ph\u1ea7n \u0102n"},addCommentByRecipe:{id:"addCommentByRecipe",name:"Th\xeam Ghi Ch\xfa Cho B\u1ebfp"},addCommentByShift:{id:"addCommentByShift",name:"Th\xeam Ghi Ch\xfa Cho T\u1eebng Ca"},openChiPhiCoDinhModal:{id:"openChiPhiCoDinhModal",name:"Chi Ph\xed C\u1ed1 \u0110\u1ecbnh"},addNgayCong:{id:"addNgayCong",name:"Th\xeam ng\xe0y c\xf4ng"},tongHopLuong:{id:"tongHopLuong",name:"T\u1ed5ng h\u1ee3p l\u01b0\u01a1ng"},confirmSave:{id:"confirmSave",name:"X\xe1c nh\u1eadn l\u01b0u"},addNhanVienTangCa:{id:"addNhanVienTangCa",name:"Th\xeam Nh\xe2n Vi\xean T\u0103ng Ca"},viewChiTietChamCong:{id:"viewChiTietChamCong",name:"Xem Chi Ti\u1ebft Ch\u1ea5m C\xf4ng"}}},805:function(e,n,t){"use strict";var a=t(3),o=t(49),i=t(50),c=t(83),l=t(82),r=(t(0),t(43)),d=t(84),u=(t(313),t(95)),s=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)(this,t),(e=n.call(this,{},{},{})).canTinId=a.canTinId,e.shiftArray=Object(r.isArray)(a.shiftArray)?a.shiftArray:[],e.shiftArrayDuTru=Object(r.isArray)(a.shiftArrayDuTru)?a.shiftArrayDuTru:[],e.caBangCaFields=Object(r.isArray)(a.caBangCaFields)?a.caBangCaFields:[],e.exportDuTru="function"===typeof a.exportDuTru?a.exportDuTru:r.noop,e.mealPrice=0,e.chiPhiCoDinh=[],e}return Object(i.a)(t,null,[{key:"getSoMonWithConditon",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.dayDuTruData,o=t.dayThucDonData,i=t.condition;if(i){var c,l=(null===e||void 0===e||null===(c=e[n])||void 0===c?void 0:c.values)||[],r=l.reduce((function(e,n){var t,c,l,r=null===o||void 0===o||null===(t=o["".concat(n)])||void 0===t?void 0:t.recipeId;if(!r)return e;var d=((null===a||void 0===a||null===(c=a[n])||void 0===c?void 0:c.soPhanAn)||0)+((null===a||void 0===a||null===(l=a[n])||void 0===l?void 0:l.soPhanThem)||0);return r.indexOf(i)>-1?e+d:e}),0);return r}}},{key:"getSoMon",value:function(e,n){var t,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.dayDuTruData,i=(null===e||void 0===e||null===(t=e[n])||void 0===t?void 0:t.values)||[],c=i.reduce((function(e,n){var t,a;return e+(((null===o||void 0===o||null===(t=o[n])||void 0===t?void 0:t.soPhanAn)||0)+((null===o||void 0===o||null===(a=o[n])||void 0===a?void 0:a.soPhanThem)||0))}),0);return c}},{key:"getSoMonMan",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.b.monManConfig.id,o=t.getSoMon(e,a,n),i=n.soMonMan,c=void 0===i?2:i;return Math.round(o/c)}},{key:"getSoMonMan_CoCanh",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.b.monManConfig.id,i=t.getSoMonWithConditon(e,o,Object(a.a)(Object(a.a)({},n),{},{condition:"canh"}));return i}},{key:"getSoMonCT_CoCom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.b.monCTConfig.id,i=t.getSoMonWithConditon(e,o,Object(a.a)(Object(a.a)({},n),{},{condition:"c\u01a1m"}));return i}},{key:"getSoMonNuocChay",value:function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.dayDuTruData,o=t.dayThucDonData,i=t.recipeDatas,c=u.b.vegConfig.id,l=(null===e||void 0===e||null===(n=e[c])||void 0===n?void 0:n.values)||[],r=l.reduce((function(e,n){var t,c,l,r,d=null===o||void 0===o||null===(t=o["".concat(n)])||void 0===t?void 0:t.recipeId;if(!d)return e;var u="M\xf3n n\u01b0\u1edbc chay"===(null===i||void 0===i||null===(c=i[d])||void 0===c?void 0:c.categoryRecipe),s=(null===a||void 0===a||null===(l=a[n])||void 0===l?void 0:l.soPhanAn)||0,h=(null===a||void 0===a||null===(r=a[n])||void 0===r?void 0:r.soPhanThem)||0;return u?e+(s+h):e}),0);return r}},{key:"getSoMonChay",value:function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.b.vegConfig.id,i=t.getSoMon(e,o,a),c=(null===e||void 0===e||null===(n=e[o])||void 0===n?void 0:n.values)||[],l=1===c.length?1:2;return Math.round(i/l)}},{key:"getSoMonCT",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.b.monCTConfig.id,o=t.getSoMon(e,a,n);return Math.round(o)}},{key:"getSoMonNuoc",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.b.monNuocConfig.id,o=t.getSoMon(e,a,n);return Math.round(o)}},{key:"getSoMonXao",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoMonMan(e,n),o=t.getSoMonChay(e,n);return a+o}},{key:"getSoMonCanh",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoMonMan(e,n),o=t.getSoMonChay(e,n),i=0,c=0,l=a+o-i+c;return l}},{key:"getSoMonTrangMieng",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoTongPhan(e,n);return Math.round(a)}},{key:"getSoTongPhan",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoMonMan(e,n),o=t.getSoMonChay(e,n),i=t.getSoMonNuoc(e,n),c=t.getSoMonCT(e,n);return a+o+i+c}}]),t}(d.a);n.a=s},865:function(e,n,t){"use strict";var a=t(10),o=t(49),i=t(50),c=t(83),l=t(82),r=t(0),d=t.n(r),u=t(805),s=t(13),h=t(776),v=t(699),m=t(702),f=t(703),b=t(438),g=t(314),C=t(297),p=v.a.TextArea,I={name:{id:"name",name:"Lo\u1ea1i m\xf3n",width:130,fixed:!0,render:function(e,n,t){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(null===o||void 0===o?void 0:o.recipeKinds)||{};return d.a.createElement("strong",{className:"ml-2",style:{color:"blue"}},(null===i||void 0===i||null===(a=i[e])||void 0===a?void 0:a.name)||e)}},loaiMon:{id:"name",name:"Lo\u1ea1i m\xf3n",className:"text-small",width:130,render:function(e){return d.a.createElement("strong",null,e)}},tenMon:{id:"tenMon",name:"T\xean m\xf3n",className:"text-small",width:190,render:function(e,n,t,a){var o=a.shiftId,i=a.coSoId,c=a.customerId,l=a.dayId,r=a.history,u=a.customerGroupId,s=a.isView,v=e,m=n.id;return v?d.a.createElement("div",{style:{color:"#1012ff"},className:"hoverClass font-weight-bold",onClick:function(){if(s)return null;var e=[[h.b.MODAL_ID,h.a.editRecipe.id],[h.b.COSO_ID,i],[h.b.CUSTOMER_ID,c],[h.b.CUSTOMER_GROUP_ID,u],[h.b.RECIPE_ID,v]];Object(C.d)(r,e)}},v):d.a.createElement("div",{className:"hoverClass",onClick:function(){if(s)return null;var e=[[h.b.MODAL_ID,h.a.selectRecipe.id],[h.b.SHIFT_ID,o],[h.b.KIND_ID,m],[h.b.DAY_ID,l],[h.b.RECIPE_ID,v]];Object(C.d)(r,e)}},"--")}},giaMon:{id:"giaMon",name:"Gi\xe1 m\xf3n",className:"text-small",width:80,align:"center",render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.giaPhanAn,i=d.a.createElement("strong",{className:"text-danger float-right"},d.a.createElement("sub",null,Object(s.f)(e,o),"%")),c=d.a.createElement(m.a,null,d.a.createElement(f.a,{sm:24}," ",i));return e?c:""}},soPhanThem:{id:"soPhanThem",name:"SP th\xeam",className:"text-small",align:"center",width:80,render:function(e,n,t,a){var o=a.isInput,i=a.setIsInput,c=a.shiftId,l=a.onUpdate,r=a.isView,u="soPhanThem",s=n.id;return o.shiftId!==c||o.type!==u||r?d.a.createElement("div",{className:"hoverClass font-weight-bold",style:{textDecoration:"underline"},onClick:function(){return i({shiftId:c,type:u,recipeKindId:s})}},e||"--"):d.a.createElement(b.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===s,size:"small",step:5,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);l(n,{type:u,recipeKindId:s})}})}},soPhanAn:{id:"soPhanAn",name:"SP \u0103n",align:"center",className:"text-small",width:70,render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.isInput,i=a.setIsInput,c=a.shiftId,l=a.onUpdate,r=a.isView,u="soPhanAn",s=n.id,h=n.loaiMonId,v=new g.a;return v.checkNotAddSoPhanAn(h)?e||"":o.shiftId!==c||o.type!==u||r?d.a.createElement("div",{className:"hoverClass font-weight-bold",style:{textDecoration:"underline"},onClick:function(){return i({shiftId:c,type:u,recipeKindId:s})}},e||"--"):d.a.createElement(b.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===s,size:"small",min:0,step:10,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);l(n,{type:u,recipeKindId:s})}})}},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",align:"right",className:"text-small",width:90,render:function(e){return e?Object(s.b)(e):""}},ghiChu:{id:"ghiChu",name:"Ghi ch\xfa",width:230,className:"text-small",render:function(e,n,t,a){var o=a.isInput,i=a.setIsInput,c=a.shiftId,l=a.onUpdate,r=a.isView,u=n.id;return o.shiftId!==c||"ghiChu"!==o.type||r?d.a.createElement("div",{className:"hoverClass",style:{textDecoration:"underline"},onClick:function(){return i({shiftId:c,recipeKindId:u,type:"ghiChu"})}},e||"--"):d.a.createElement(p,{rows:2,tabIndex:t+1,autoFocus:u===o.recipeKindId,size:"small",defaultValue:e||"",style:{width:"100%"},onBlur:function(e){var n=e.target.value;l(n,{type:"ghiChu",recipeKindId:u})}})}}},D=t(66),O=t.n(D),y=(t(720),t(48)),M=t(43),T=t(294),j=t(707),N=Object(r.memo)((function(e){var n,t,a,o,i,c=e.history,l=e.cellId,r=e.isMonPhu,u=e.dayId,v=e.loaiMonId,m=e.onDelete,f=e.visibleCost,b=e.shiftData,g=e.isView,p=e.isAfter,I=Object(j.a)(),D=Object(j.b)((function(e){return e.nguyenLieu})).nguyenLieus,O=Object(j.b)((function(e){return e.recipe})).ingreRecipeData,y=Object(j.b)((function(e){return e.thucDonDuTruSetting})).nhomGiaMonAnData,M=Object(j.b)((function(e){return e.thucDonDuTru})).thucDonDuTruWeek,N=Object(j.b)((function(e){return e.thucDon})).hienThiTatCaNoiPhucVu,P=null===y||void 0===y?void 0:y.giaPhanAn,E=null===b||void 0===b?void 0:b.id,S=null===M||void 0===M||null===(n=M[E])||void 0===n||null===(t=n.thucDons)||void 0===t||null===(a=t[u])||void 0===a||null===(o=a.kindIds)||void 0===o||null===(i=o["".concat(v)])||void 0===i?void 0:i.recipeId,x=function(e){e.stopPropagation(),window.confirm("X\xe1c nh\u1eadn x\xf3a ".concat(S))&&m(v,u)},w=d.a.useCallback((function(){var e=(null===O||void 0===O?void 0:O[S])||[];if(0===e.length||!f)return null;var n={nguyenLieus:e},t=I(Object(T.d)(n));return d.a.createElement("span",{className:"cost-style"},"(".concat(Object(s.f)(t,P),"%)"))}),[S,O,P,D,f]);return d.a.createElement("div",{id:l,className:["recipe-style",S?"":"text-center"].join(" "),style:{overflowY:"auto",fontSize:"14px"},onClick:function(){if(p||g)return null;var e=[[h.b.MODAL_ID,h.a.selectRecipe.id],[h.b.SHIFT_ID,E],[h.b.KIND_ID,v],[h.b.DAY_ID,u],[h.b.IS_MON_PHU,r],[h.b.RECIPE_ID,S]];Object(C.d)(c,e)}},N?"":w()," ",S||(S?d.a.createElement("span",{className:"text-black-50"},"Thi\u1ebfu ".concat(S)):p?"":"--")," ",g||p?null:S&&d.a.createElement("div",{className:"delete-icon",onClick:x},d.a.createElement("i",{className:"fa fa-close"})))}));N.defaultProps={onDelete:M.noop,visibleCost:!0};var P=Object(y.o)(N),E="Admin",S=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(e){var a;return Object(o.a)(this,t),(a=n.call(this,e)).tableColumns=[I.name],a.duTruItemColumns=[I.loaiMon,I.tenMon,I.giaMon,I.soPhanThem,I.soPhanAn,I.thanhTien,I.ghiChu],a}return Object(i.a)(t,[{key:"getTableColumns",value:function(e){var n=this,t=e.isView,o=e.yearId,i=e.weekId,c=e.onDelete,l=e.visibleCost,r=e.shiftData;if(!i||!o)return[];var u=this.tableColumns.map((function(t){return n.getGeneralFields(t,e)})),h=Array(7).fill(1).reduce((function(e,n,u){var h=n+u,v=Object(s.h)()===E,m=O()(o,"YYYY").week(i).day(n+u),f=m.format("dddd"),b=m.format("DD/MM"),g=O()().format("DD-MM-YYYY")===m.format("DD-MM-YYYY"),C=O()().subtract(1,"day").isAfter(m),p=g?{border:"1px solid lightblue"}:{};v&&(C=!1);var I={id:h,name:"".concat(f," (").concat(b,")"),width:160,align:"center",render:function(e,n,a){var o=n.id,i=n.isMonPhu,u="".concat(null===r||void 0===r?void 0:r.id,"-").concat(n.id,"-").concat(h);return d.a.createElement("div",{style:p},d.a.createElement(P,{shiftData:r,visibleCost:l,isView:t,isMonPhu:i,cellId:u,index:a,dayId:"".concat(f).toLowerCase(),isAfter:C,loaiMonId:o,onDelete:c}))}};return[].concat(Object(a.a)(e),[I])}),[]).map((function(t){return n.getGeneralFields(t,e)}));return u=[].concat(Object(a.a)(u),Object(a.a)(h))}},{key:"getDuTruItemColumns",value:function(e){var n=this;return this.duTruItemColumns.map((function(t){return n.getGeneralFields(t,e)}))}}]),t}(u.a);n.a=S}}]);